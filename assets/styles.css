 :root{
      --brand:#008069; --brand-dark:#006f5c;
      --bg:#f0f2f5; --panel:#fafafa; --bubble-me:#d1ffd1; --bubble-other:#ffffff;
      --bg-dark:#18191a; --panel-dark:#242526; --bubble-me-dark:#056162; --bubble-other-dark:#3a3b3c;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:"Tahoma",system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);color:#111;transition:.25s}
    .dark{background:var(--bg-dark);color:#e4e6eb}
    header{position:sticky;top:0;z-index:5;padding:12px;background:var(--brand);color:#fff;text-align:center;font-size:22px;font-weight:700}

    .controls{
      position:sticky; top:56px; z-index:4;
      display:flex; flex-direction:column; gap:8px; padding:12px; background:var(--panel);
      border-bottom:1px solid #e6e6e6;
    }
    .dark .controls{background:var(--panel-dark); border-bottom-color:#3a3b3c}

    input[type="file"]{display:none}
    .file-label, .btn, .search{
      padding:12px 14px; border:none; border-radius:14px; font-size:14px;
    }
    .file-label, .btn{background:var(--brand); color:#fff; cursor:pointer}
    .file-label:hover, .btn:hover{background:var(--brand-dark)}
    .search{background:#fff; flex:1}
    .dark .search{background:#333; color:#fff}

    /* صفوف موبايل */
    .row{display:flex; gap:8px; align-items:center; justify-content:space-between}
    .row.icons .btn{flex:0 0 auto; padding:2px; font-size:13px; border-radius:50%}

    /* منطقة الدردشة */
    #chat{height:calc(100vh - 56px - 120px);padding:12px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:flex;flex-direction:column}
    .msg{margin:8px 0;padding:18px;border-radius:20px;max-width:95%;word-wrap:break-word;box-shadow:0 1px 2px rgba(0,0,0,.06);font-size:18px;line-height:1.45;display:flex;flex-direction:column}
    .sender{font-weight:700;font-size:14px;opacity:.9;margin-bottom:8px}
    .from{background:var(--bubble-me);margin-left:auto;text-align:right}
    .to{background:var(--bubble-other);margin-right:auto;text-align:left}
    .dark .from{background:var(--bubble-me-dark);color:#fff}
    .dark .to{background:var(--bubble-other-dark);color:#fff}
    .from .sender{color:#0c7a43}
    .to .sender{color:#1c6dd0}
    mark{background:yellow;padding:0 .2em}

    /* شاشات أوسع */
    @media (min-width: 700px){
      .controls{flex-direction:row;flex-wrap:wrap;align-items:center}
      .row{flex:1}
      .row.icons .btn{border-radius:12px; font-size:16px; padding:10px 14px}
      #chat{height:calc(100vh - 56px - 88px)}
      .msg{max-width:75%;font-size:18px;padding:12px 16px}
      .sender{font-size:14px}
    }
    @media (min-width: 1100px){.msg{max-width:65%}}